(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{305:function(t,e,s){t.exports={avatarAndDescription:"ProfileInfo_avatarAndDescription__3_rdh",mainPhoto:"ProfileInfo_mainPhoto__23ZjC",contact:"ProfileInfo_contact__1uHO_",formSummaryError:"ProfileInfo_formSummaryError__eItjX"}},309:function(t,e,s){t.exports={post:"Post_post__3Qqu9"}},310:function(t,e,s){t.exports={posts:"Posts_posts__1t8R1"}},312:function(t,e,s){"use strict";s.r(e);var c=s(3),i=s(68),r=s(69),o=s(72),n=s(71),a=s(0),j=s.n(a),u=s(103),l=s(66),b=s(305),d=s.n(b),h=s(1),p=function(t){var e=Object(a.useState)(!1),s=Object(u.a)(e,2),c=s[0],i=s[1],r=Object(a.useState)(t.status),o=Object(u.a)(r,2),n=o[0],j=o[1];Object(a.useEffect)((function(){j(t.status)}),[t.status]);return Object(h.jsxs)("div",{children:[!c&&Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Status:"}),Object(h.jsx)("span",{onDoubleClick:function(){i(!0)},children:t.status||"-----"})]}),c&&Object(h.jsx)("div",{children:Object(h.jsx)("input",{onChange:function(t){j(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.updateStatus(n)},value:n})})]})},O=s(125),f=s(136),x=s(29),m=Object(f.a)({form:"edit-profile"})((function(t){var e=t.handleSubmit,s=t.profile,c=t.error;return Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"save"})}),c&&Object(h.jsx)("div",{className:d.a.formSummaryError,children:c}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"FullName:"})," ",Object(x.c)("FullName","fullName",x.a,[])]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Looking for a job:"})," ",Object(x.c)("","lookingForAJob",x.a,[],"checkbox")]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"My hardskills:"})," ",Object(x.c)("","lookingForAJobDescription",x.b,[])]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"About me:"})," ",Object(x.c)("","aboutMe",x.b,[])]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Contacts:"}),Object.keys(s.contacts).map((function(t){return Object(h.jsxs)("div",{className:d.a.contact,children:[Object(h.jsxs)("b",{children:[t,":"]})," ",Object(x.c)(t,"contacts."+t,x.a,[])]},t)}))]})]})})),v=function(t){var e=t.profile,s=t.isOwner,c=t.activateEditMode;return Object(h.jsxs)("div",{children:[s&&Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:c,children:"Edit"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"FullName:"}),e.fullName]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Looking for a job:"}),e.lookingForAJob?" yes":" no"]}),e.lookingForAJob&&Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"My hardskills:"}),e.lookingForAJobDescription]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"About me:"}),e.aboutMe]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(h.jsx)(g,{contactTitle:t,contactValue:e.contacts[t]},t)}))]})]})},g=function(t){var e=t.contactTitle,s=t.contactValue;return Object(h.jsxs)("div",{className:d.a.contact,children:[Object(h.jsxs)("b",{children:[e,":"]})," ",s]})},P=function(t){var e=t.profile,s=t.status,c=t.updateStatus,i=t.isOwner,r=t.savePhoto,o=t.saveProfileChanges,n=Object(a.useState)(!1),j=Object(u.a)(n,2),b=j[0],f=j[1];if(!e)return Object(h.jsx)(l.a,{});return Object(h.jsxs)("div",{className:d.a.avatarAndDescription,children:[Object(h.jsx)("img",{src:e.photos.large||O.a,className:d.a.mainPhoto}),i&&Object(h.jsx)("input",{type:"file",onChange:function(t){t.target.files&&t.target.files.length&&r(t.target.files[0])}}),b?Object(h.jsx)(m,{initialValues:e,profile:e,onSubmit:function(t){o(t).then((function(){f(!1)}))}}):Object(h.jsx)(v,{profile:e,isOwner:i,activateEditMode:function(){f(!0)}}),Object(h.jsx)(p,{status:s,updateStatus:c})]})},k=s(10),S=s(104),y=s(309),_=s.n(y),w=function(t){return Object(h.jsxs)("div",{className:_.a.post,children:[Object(h.jsx)("img",{src:"https://sun9-68.userapi.com/impf/c851132/v851132376/1188a1/2LuEdvm-8sQ.jpg?size=1720x2160&quality=96&sign=2cd993cfc5b64e41790739f26db3a77f&type=album"}),t.message,Object(h.jsx)("div",{children:Object(h.jsxs)("button",{children:[t.likes," likes"]})})]})},A=s(310),I=s.n(A),N=s(48),C=Object(N.a)(10),F=function(t){var e=t.posts.map((function(t){return Object(h.jsx)(w,{id:t.id,message:t.message,likes:t.likes},t.id)}));return Object(h.jsxs)("div",{className:I.a.posts,children:[Object(h.jsx)("h3",{children:"my posts "}),Object(h.jsx)(U,{onSubmit:function(e){t.addPost(e.newPostText)}}),e]})},D=j.a.memo(F),U=Object(f.a)({form:"profileNewPostForm"})((function(t){return Object(h.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(h.jsx)("div",{children:Object(x.c)("start to write a new post","newPostText",x.b,[N.b,C],"",{className:I.a.input})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"Add post"})})]})})),E=D,J=Object(k.b)((function(t){return{newPostText:t.profilePage.newPostText,posts:t.profilePage.posts}}),{addPost:S.a.addPostActionCreator})(E),M=function(t){return t.profile?Object(h.jsxs)("div",{children:[Object(h.jsx)(P,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto,saveProfileChanges:t.saveProfileChanges}),Object(h.jsx)(J,{})]}):Object(h.jsx)(l.a,{})},T=s(12),z=s(11),L=function(t){Object(o.a)(s,t);var e=Object(n.a)(s);function s(){return Object(i.a)(this,s),e.apply(this,arguments)}return Object(r.a)(s,[{key:"refreshProfile",value:function(){var t=+this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),t?(this.props.getUserProfile(t),this.props.getUserStatus(t)):console.error("ID should exists in URI params or State ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsx)(M,Object(c.a)(Object(c.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}))}}]),s}(j.a.Component);e.default=Object(z.d)(Object(k.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),{getUserProfile:S.c,getUserStatus:S.d,updateStatus:S.g,savePhoto:S.e,saveProfileChanges:S.f}),T.g)(L)}}]);
//# sourceMappingURL=4.865f3b1c.chunk.js.map